(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{32:function(n,e,t){},57:function(n,e,t){},62:function(n,e,t){"use strict";t.r(e);var a={};t.r(a),t.d(a,"_version",(function(){return f})),t.d(a,"_backendVersion",(function(){return m})),t.d(a,"getExports",(function(){return g})),t.d(a,"_getViews",(function(){return x})),t.d(a,"_getMaps",(function(){return y})),t.d(a,"Alice",(function(){return h})),t.d(a,"Bob",(function(){return A})),t.d(a,"_Connectors",(function(){return T}));var s=t(2),r=t.n(s),o=t(23),c=t.n(o),i=(t(32),t(6)),p=t.n(i),u=t(7),l=t(10),d=t(1),b=t(9),f="0.1.3",m=1;function g(n){n.reachStdlib;return{}}function x(n,e){n.reachStdlib;return{infos:{},views:{}}}function y(n){return{mapDataTy:n.reachStdlib.T_Tuple([])}}function h(n,e){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(i.mark((function n(e,t){var a,s,r,o,c,p,l,d,f,m,g,x,y,h,v;return i.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("object"===typeof e&&void 0!==e.sendrecv){n.next=2;break}return n.abrupt("return",Promise.reject(new Error("The backend for Alice expects to receive a contract as its first argument.")));case 2:if("object"===typeof t){n.next=4;break}return n.abrupt("return",Promise.reject(new Error("The backend for Alice expects to receive an interact object as its second argument.")));case 4:return a=e.stdlib,s=a.T_UInt,r=a.T_Tuple([s]),o=a.T_Digest,c=a.protect(s,t.amt,"for Alice's interact field amt"),p=a.protect(s,t.pass,"for Alice's interact field pass"),l=a.digest(r,[p]),n.next=13,e.sendrecv({args:[l,c],evt_cnt:2,funcNum:1,onlyIf:!0,out_tys:[o,s],pay:[c,[]],sim_p:function(){var n=Object(u.a)(i.mark((function n(e){var t,a,s;return i.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={txns:[],mapRefs:[],mapsPrev:[],mapsNext:[]},a=Object(b.a)(e.data,2),a[0],s=a[1],e.time,e.secs,e.from,t.txns.push({amt:s,kind:"to",tok:void 0}),t.isHalt=!1,n.abrupt("return",t);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),soloSend:!0,timeoutAt:void 0,tys:[o,s],waitIfNotPresent:!1});case 13:return d=n.sent,f=Object(b.a)(d.data,2),m=f[0],f[1],d.time,d.secs,d.from,n.next=21,e.recv({evt_cnt:1,funcNum:2,out_tys:[s],timeoutAt:void 0,waitIfNotPresent:!1});case 21:return g=n.sent,x=Object(b.a)(g.data,1),y=x[0],g.time,g.secs,g.from,h=a.digest(r,[y]),v=a.digestEq(m,h),a.assert(v,{at:"./index.rsh:75:12:application",fs:[],msg:"Digests actually match",who:"Alice"}),n.abrupt("return");case 32:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function A(n,e){return j.apply(this,arguments)}function j(){return(j=Object(u.a)(i.mark((function n(e,t){var a,s,r,o,c,p,l,d,f,m,g,x,y,h,v,A;return i.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("object"===typeof e&&void 0!==e.sendrecv){n.next=2;break}return n.abrupt("return",Promise.reject(new Error("The backend for Bob expects to receive a contract as its first argument.")));case 2:if("object"===typeof t){n.next=4;break}return n.abrupt("return",Promise.reject(new Error("The backend for Bob expects to receive an interact object as its second argument.")));case 4:return a=e.stdlib,s=a.T_Digest,r=a.T_UInt,o=a.T_Tuple([r]),n.next=10,e.recv({evt_cnt:2,funcNum:1,out_tys:[s,r],timeoutAt:void 0,waitIfNotPresent:!1});case 10:return c=n.sent,p=Object(b.a)(c.data,2),l=p[0],d=p[1],c.time,c.secs,c.from,n.t0=a,n.t1=r,n.next=20,t.getPass();case 20:return n.t2=n.sent,n.t3={at:"./index.rsh:61:47:application",fs:["at ./index.rsh:60:13:application call to [unknown function] (defined at: ./index.rsh:60:17:function exp)"],msg:"getPass",who:"Bob"},f=n.t0.protect.call(n.t0,n.t1,n.t2,n.t3),m=a.digest(o,[f]),g=a.digestEq(l,m),a.assert(g,{at:"./index.rsh:62:13:application",fs:["at ./index.rsh:60:13:application call to [unknown function] (defined at: ./index.rsh:60:17:function exp)"],msg:null,who:"Bob"}),n.next=28,e.sendrecv({args:[l,d,f],evt_cnt:1,funcNum:2,onlyIf:!0,out_tys:[r],pay:[a.checkedBigNumberify("./index.rsh:decimal",a.UInt_max,0),[]],sim_p:function(){var n=Object(u.a)(i.mark((function n(e){var t,s,r,c,p,u;return i.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={txns:[],mapRefs:[],mapsPrev:[],mapsNext:[]},s=Object(b.a)(e.data,1),r=s[0],e.time,e.secs,c=e.from,t.txns.push({amt:a.checkedBigNumberify("./index.rsh:decimal",a.UInt_max,0),kind:"to",tok:void 0}),p=a.digest(o,[r]),u=a.digestEq(l,p),a.assert(u,{at:"./index.rsh:75:12:application",fs:[],msg:"Digests actually match",who:"Bob"}),t.txns.push({amt:d,kind:"from",to:c,tok:void 0}),t.txns.push({kind:"halt",tok:void 0}),t.isHalt=!0,n.abrupt("return",t);case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),soloSend:!0,timeoutAt:void 0,tys:[s,r,r],waitIfNotPresent:!1});case 28:return x=n.sent,y=Object(b.a)(x.data,1),h=y[0],x.time,x.secs,x.from,v=a.digest(o,[h]),A=a.digestEq(l,v),a.assert(A,{at:"./index.rsh:75:12:application",fs:[],msg:"Digests actually match",who:"Bob"}),n.abrupt("return");case 39:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var T={ALGO:{appApproval:'#pragma version 4\ntxn RekeyTo\nglobal ZeroAddress\n==\nassert\ntxn Lease\nglobal ZeroAddress\n==\nassert\nint 0\nstore 0\ntxn ApplicationID\nbz alloc\nbyte base64()\napp_global_get\ndup\nsubstring 0 32\nstore 1\nsubstring 32 64\nstore 2\ntxn NumAppArgs\nint 3\n==\nassert\ntxna ApplicationArgs 0\nbtoi\ndup\nbz ctor\n// Handler 1\ndup\nint 1\n==\nbz l0\npop\ntxna ApplicationArgs 1\ndup\nlen\nint 0\n==\nassert\npop\ntxna ApplicationArgs 2\ndup\nlen\nint 40\n==\nassert\ndup\nsubstring 0 32\nstore 255\ndup\nsubstring 32 40\nbtoi\nstore 254\npop\n// compute state in HM_Check 0\nint 8\nbzero\nsha256\nload 1\n==\nassert\n// "CheckPay"\n// "./index.rsh:51:11:dot"\n// "[]"\nload 254\ndup\nbz l1\nload 0\ndup\nint 1\n+\nstore 0\nswap\ndig 1\ngtxns Amount\n==\nassert\nint pay\ndig 1\ngtxns TypeEnum\n==\nassert\nint 0\ndig 1\ngtxns Fee\n==\nassert\nglobal ZeroAddress\ndig 1\ngtxns Lease\n==\nassert\nglobal ZeroAddress\ndig 1\ngtxns RekeyTo\n==\nassert\nload 2\ndig 1\ngtxns Receiver\n==\nassert\nl1:\npop\n// compute state in HM_Set 1\nbyte base64(AAAAAAAAAAE=)\nload 255\nconcat\nload 254\nitob\nconcat\nsha256\nstore 1\ntxn OnCompletion\nint NoOp\n==\nassert\nb updateState\nl0:\n// Handler 2\ndup\nint 2\n==\nbz l2\npop\ntxna ApplicationArgs 1\ndup\nlen\nint 40\n==\nassert\ndup\nsubstring 0 32\nstore 255\ndup\nsubstring 32 40\nbtoi\nstore 254\npop\ntxna ApplicationArgs 2\ndup\nlen\nint 8\n==\nassert\ndup\nbtoi\nstore 253\npop\n// compute state in HM_Check 1\nbyte base64(AAAAAAAAAAE=)\nload 255\nconcat\nload 254\nitob\nconcat\nsha256\nload 1\n==\nassert\n// "CheckPay"\n// "./index.rsh:64:9:dot"\n// "[]"\n// Just "Digests actually match"\n// "./index.rsh:75:12:application"\n// "[]"\nload 255\nload 253\nitob\nsha256\n==\nassert\nload 254\ndup\nbz l3\nload 0\ndup\nint 1\n+\nstore 0\nswap\ndig 1\ngtxns Amount\n==\nassert\nint pay\ndig 1\ngtxns TypeEnum\n==\nassert\nint 0\ndig 1\ngtxns Fee\n==\nassert\nglobal ZeroAddress\ndig 1\ngtxns Lease\n==\nassert\nglobal ZeroAddress\ndig 1\ngtxns RekeyTo\n==\nassert\nload 2\ndig 1\ngtxns Sender\n==\nassert\ntxn Sender\ndig 1\ngtxns Receiver\n==\nassert\nl3:\npop\nint 0\nload 0\ndup\nint 1\n+\nstore 0\nswap\ndig 1\ngtxns Amount\n==\nassert\nint pay\ndig 1\ngtxns TypeEnum\n==\nassert\nint 0\ndig 1\ngtxns Fee\n==\nassert\nglobal ZeroAddress\ndig 1\ngtxns Lease\n==\nassert\nglobal ZeroAddress\ndig 1\ngtxns RekeyTo\n==\nassert\nload 2\ndig 1\ngtxns Sender\n==\nassert\nglobal CreatorAddress\ndig 1\ngtxns CloseRemainderTo\n==\nassert\nl4:\npop\nglobal ZeroAddress\nstore 1\ntxn OnCompletion\nint DeleteApplication\n==\nassert\nb updateState\nl2:\nint 0\nassert\nupdateState:\nbyte base64()\nload 1\nload 2\nconcat\napp_global_put\ncheckSize:\nload 0\ndup\ndup\nint 1\n+\nglobal GroupSize\n==\nassert\ntxn GroupIndex\n==\nassert\nint 1000\n*\ntxn Fee\n<=\nassert\ndone:\nint 1\nreturn\nalloc:\ntxn OnCompletion\nint NoOp\n==\nassert\nbyte base64()\nint 64\nbzero\napp_global_put\nb checkSize\nctor:\ntxn Sender\nglobal CreatorAddress\n==\nassert\ntxna ApplicationArgs 1\nstore 2\n// compute state in HM_Set 0\nint 8\nbzero\nsha256\nstore 1\ntxn OnCompletion\nint NoOp\n==\nassert\nb updateState\n',appClear:"#pragma version 4\nint 0\n",escrow:"#pragma version 4\nglobal GroupSize\nint 1\n-\ndup\ngtxns TypeEnum\nint appl\n==\nassert\ngtxns ApplicationID\nint {{ApplicationID}}\n==\nassert\ndone:\nint 1\n",mapDataKeys:0,mapDataSize:0,unsupported:[],version:2,viewKeys:0,viewSize:0},ETH:{ABI:'[\n  {\n    "inputs": [\n      {\n        "components": [\n          {\n            "internalType": "bool",\n            "name": "svs",\n            "type": "bool"\n          },\n          {\n            "components": [\n              {\n                "internalType": "uint256",\n                "name": "v22",\n                "type": "uint256"\n              },\n              {\n                "internalType": "uint256",\n                "name": "v23",\n                "type": "uint256"\n              }\n            ],\n            "internalType": "struct T0",\n            "name": "msg",\n            "type": "tuple"\n          }\n        ],\n        "internalType": "struct T2",\n        "name": "_a",\n        "type": "tuple"\n      }\n    ],\n    "stateMutability": "payable",\n    "type": "constructor"\n  },\n  {\n    "inputs": [\n      {\n        "internalType": "uint256",\n        "name": "msg",\n        "type": "uint256"\n      }\n    ],\n    "name": "ReachError",\n    "type": "error"\n  },\n  {\n    "anonymous": false,\n    "inputs": [],\n    "name": "e0",\n    "type": "event"\n  },\n  {\n    "anonymous": false,\n    "inputs": [\n      {\n        "components": [\n          {\n            "internalType": "bool",\n            "name": "svs",\n            "type": "bool"\n          },\n          {\n            "components": [\n              {\n                "internalType": "uint256",\n                "name": "v22",\n                "type": "uint256"\n              },\n              {\n                "internalType": "uint256",\n                "name": "v23",\n                "type": "uint256"\n              }\n            ],\n            "internalType": "struct T0",\n            "name": "msg",\n            "type": "tuple"\n          }\n        ],\n        "indexed": false,\n        "internalType": "struct T2",\n        "name": "_a",\n        "type": "tuple"\n      }\n    ],\n    "name": "e1",\n    "type": "event"\n  },\n  {\n    "anonymous": false,\n    "inputs": [\n      {\n        "components": [\n          {\n            "components": [\n              {\n                "internalType": "uint256",\n                "name": "v22",\n                "type": "uint256"\n              },\n              {\n                "internalType": "uint256",\n                "name": "v23",\n                "type": "uint256"\n              }\n            ],\n            "internalType": "struct T0",\n            "name": "svs",\n            "type": "tuple"\n          },\n          {\n            "components": [\n              {\n                "internalType": "uint256",\n                "name": "v35",\n                "type": "uint256"\n              }\n            ],\n            "internalType": "struct T3",\n            "name": "msg",\n            "type": "tuple"\n          }\n        ],\n        "indexed": false,\n        "internalType": "struct T4",\n        "name": "_a",\n        "type": "tuple"\n      }\n    ],\n    "name": "e2",\n    "type": "event"\n  },\n  {\n    "inputs": [\n      {\n        "components": [\n          {\n            "components": [\n              {\n                "internalType": "uint256",\n                "name": "v22",\n                "type": "uint256"\n              },\n              {\n                "internalType": "uint256",\n                "name": "v23",\n                "type": "uint256"\n              }\n            ],\n            "internalType": "struct T0",\n            "name": "svs",\n            "type": "tuple"\n          },\n          {\n            "components": [\n              {\n                "internalType": "uint256",\n                "name": "v35",\n                "type": "uint256"\n              }\n            ],\n            "internalType": "struct T3",\n            "name": "msg",\n            "type": "tuple"\n          }\n        ],\n        "internalType": "struct T4",\n        "name": "_a",\n        "type": "tuple"\n      }\n    ],\n    "name": "m2",\n    "outputs": [],\n    "stateMutability": "payable",\n    "type": "function"\n  },\n  {\n    "stateMutability": "payable",\n    "type": "receive"\n  }\n]',Bytecode:"0x60806040526040516103db3803806103db8339810160408190526100229161012c565b6040517f49ff028a829527a47ec6839c7147b484eccf5a2a94853eddac09cef44d9d4e9e90600090a16040805182511515815260208084015180518284015201518183015290517f3c669845d6bbc6fc367c9fa11ea5c8ec9bfd3d70eae7b34375b93f114f7403659181900360600190a160208082015101516100a89034146007610103565b60408051808201909152600080825260208201526020808301805151835251810151828201526040516100e091600191849101610194565b60408051601f198184030181529190528051602090910120600055506101ef9050565b816101285760405163100960cb60e01b81526004810182905260240160405180910390fd5b5050565b6000818303606081121561013f57600080fd5b6101476101b9565b8351801515811461015757600080fd5b81526040601f198301121561016b57600080fd5b6101736101b9565b60208581015182526040909501518582015293810193909352509092915050565b828152606081016101b2602083018480518252602090810151910152565b9392505050565b604080519081016001600160401b03811182821017156101e957634e487b7160e01b600052604160045260246000fd5b60405290565b6101dd806101fe6000396000f3fe6080604052600436106100225760003560e01c8063212df9891461002e57600080fd5b3661002957005b600080fd5b61004161003c36600461016a565b610043565b005b60405161007f9061005b906001908490602001610182565b6040516020818303038152906040528051906020012060001c60005414600a610141565b60008055604080518235815260208084013590820152828201358183015290517fa27a43895875369be7ca68bfe853b87f531a2fd742a2d699a603684d920b05309181900360600190a16100d534156008610141565b60408051818301356020820152610109910160408051601f1981840301815291905280516020909101208235146009610141565b6040513390602083013580156108fc02916000818181858888f19350505050158015610139573d6000803e3d6000fd5b506000805533ff5b816101665760405163100960cb60e01b81526004810182905260240160405180910390fd5b5050565b60006060828403121561017c57600080fd5b50919050565b828152606081016101a0602083018480358252602090810135910152565b939250505056fea2646970667358221220ef114d105b849fe3009f04b06ca0f4805c50d328d43315142597d6e257d09d6d64736f6c63430008050033",BytecodeLen:987,Which:"oD",deployMode:"DM_firstMsg",version:1,views:{}}},O=t(24),_=t(25),S=t(12),k=t(8),w=t(13),E=t(26),P=t(27),N=(t(57),t(0)),C=Object({NODE_ENV:"production",PUBLIC_URL:"/reach-react-hash-lock",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NETWORK:"ALGO",REACT_APP_NETWORK_PROVIDER:"TestNet"}),R=C.REACT_APP_NETWORK_PROVIDER,D=C.REACT_APP_NETWORK,I=Object(O.loadStdlib)(D);I.setProviderByName(R),"ALGO"===D&&I.setSignStrategy("mnemonic");var H="ETH"===D&&"LocalHost"===R;var z=function(){var n=Object(s.useState)({acc:null}),e=Object(b.a)(n,2),t=e[0],r=e[1],o=Object(s.useState)({}),c=Object(b.a)(o,2),i=c[0],f=c[1],m=function(n){var e=n.target,t=e.name,a=e.value;switch(t){case"INFO":case"PASS":case"AMT":a=parseInt(a)}f(Object(d.a)(Object(d.a)({},i),{},Object(l.a)({},t,a)))},g=function(){var n=Object(u.a)(p.a.mark((function n(){var e,a,s,o;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Connecting ..."),n.next=3,I.getDefaultAccount();case 3:return e=n.sent,n.t0=I,n.next=7,e.getAddress();case 7:return n.t1=n.sent,a=n.t0.formatAddress.call(n.t0,n.t1),n.next=11,I.balanceOf(e);case 11:s=n.sent,o=I.formatCurrency(s,4),r(Object(d.a)(Object(d.a)({},t),{},{acc:e,addr:a,balAtomic:s,bal:o}));case 14:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),x=function(){var n=Object(u.a)(p.a.mark((function n(){var e;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Faucet ..."),n.next=3,I.getFaucet();case 3:return e=n.sent,n.t0=I,n.t1=e,n.next=8,I.getDefaultAccount();case 8:return n.t2=n.sent,n.t3=I.parseCurrency("100"),n.next=12,n.t0.transfer.call(n.t0,n.t1,n.t2,n.t3);case 12:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),y=function(){var n=Object(u.a)(p.a.mark((function n(){var e;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Handling alice ..."),e=t.acc.deploy(a),r(Object(d.a)(Object(d.a)({},t),{},{ctc:e})),n.next=5,h(e,{amt:I.parseCurrency(i.AMT),pass:i.PASS});case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),v=function(){var n=Object(u.a)(p.a.mark((function n(){var e,s,r;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Handling bob ..."),e=i.INFO,s=i.PASS,r=t.acc.attach(a,parseInt(e)),n.next=5,A(r,{getPass:function(){return console.log("Bob asked to give the preimage"),console.log("Returning: ".concat(s)),s}});case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(N.jsxs)(_.a,{children:[Object(N.jsxs)(S.a,{className:"mt-5",children:[Object(N.jsx)(k.a,{children:Object(N.jsx)("h1",{className:"text-center",children:"HashLock"})}),Object(N.jsxs)(k.a,{className:"text-center",xs:12,children:["This runs on the ",Object(N.jsx)("a",{href:"https://testnet.algoexplorer.io/",children:"Algorand Test Net"}),". Need funds? Try ",Object(N.jsx)("a",{href:"https://bank.testnet.algorand.network/",children:"Algorand dispenser"}),". Explore more ",Object(N.jsx)("a",{href:"https://temptemp3.github.io/dapps/",children:"dapps"}),"."]})]}),Object(N.jsx)(S.a,{className:"mt-5 role role-participant",children:Object(N.jsxs)(E.a,{as:k.a,xs:2,size:"lg",children:[!t.acc&&Object(N.jsx)(w.a,{onClick:g,children:"Connect"}),H&&Object(N.jsx)(w.a,{variant:"secondary",onClick:x,children:"Faucet"})]})}),t.acc&&Object(N.jsx)(S.a,{children:["addr","bal"].map((function(n){return Object(N.jsxs)(k.a,{xs:12,children:[n,": ",t[n]]})}))}),[{name:"alice",title:"Send funds",controls:[{col:{},control:{name:"AMT",placeholder:"Amount"}},{col:{xs:6},control:{name:"PASS",type:"number",placeholder:"Secret number"}}],buttonLabel:"Send",buttonProps:{onClick:y,disabled:!t.acc}},{name:"bob",title:"Receive funds",controls:[{col:{},control:{name:"ETH"===D?"ADDR":"INFO",type:"ETH"===D?"text":"number",placeholder:"Info"}},{col:{xs:6},control:{name:"PASS",type:"number",placeholder:"Secret number"}}],buttonLabel:"Receive",buttonProps:{onClick:v,disabled:!t.acc}}].map((function(n){return Object(N.jsxs)(S.a,{className:"mt-5 role ".concat(n.name),children:[Object(N.jsx)(k.a,{xs:12,className:"mb-3",children:Object(N.jsx)("h2",{children:n.title})}),n.controls.map((function(n){return Object(N.jsx)(k.a,Object(d.a)(Object(d.a)({xs:3},n.col),{},{children:Object(N.jsx)(P.a.Control,Object(d.a)({className:"mb-3",size:"lg",type:"text",onChange:m},n.control))}))})),Object(N.jsx)(k.a,{xs:3,children:Object(N.jsx)(w.a,Object(d.a)(Object(d.a)({size:"lg"},n.buttonProps),{},{children:n.buttonLabel}))})]})}))]})},B=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,63)).then((function(e){var t=e.getCLS,a=e.getFID,s=e.getFCP,r=e.getLCP,o=e.getTTFB;t(n),a(n),s(n),r(n),o(n)}))};t(61);c.a.render(Object(N.jsx)(r.a.StrictMode,{children:Object(N.jsx)(z,{})}),document.getElementById("root")),B()}},[[62,1,2]]]);
//# sourceMappingURL=main.ee53a8f2.chunk.js.map